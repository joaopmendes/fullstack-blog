(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{261:function(e,t,n){e.exports=n(508)},507:function(e,t,n){},508:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(12),c=n.n(o),l=n(53),s=n(13),u=n(237),i=n(170),d=n(238),m=n(239),p=n(240),b=n.n(p),h=n(44),f={userLoggedIn:!1,user:{accessToken:"",name:"",email:"",posts:[],profilePicture:"",_id:""}},g=Object.freeze({LOGIN_USER:"[AUTH] Logging user",LOGOUT:"[AUTH] Logout user",UPDATE_USER_DATA:"[AUTH] Update user data"}),E={isLoading:!1,hasError:!1,posts:[]},v=Object.freeze({FETCH_POSTS:"[POST] Fetching Posts",LOADING:"[POST] Loading"}),O=Object.freeze({ADD_LOADER:"[CONTROLS] Add loader",REMOVE_LOADER:"[CONTROLS] remove loader"}),j={loaders:[]},w=Object(l.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOGIN_USER:return{user:Object(h.a)({},t.payload),userLoggedIn:!0};case g.LOGOUT:return f;default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.FETCH_POSTS:return Object(h.a)(Object(h.a)({},e),{},{posts:t.payload});case v.LOADING:return Object(h.a)(Object(h.a)({},e),{},{isLoading:t.payload});default:return e}},controls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.ADD_LOADER:var n=e.loaders.findIndex((function(e){return e.id===t.payload})),a=-1!==n,r=JSON.parse(JSON.stringify(e));return a?r.loaders[n].active=!0:r.loaders.push({id:t.payload,active:!0}),console.log("ControlsReducer -> newState",r),r;case O.REMOVE_LOADER:return Object(h.a)(Object(h.a)({},e),{},{loaders:e.loaders.map((function(e){return e.id===t.payload&&(e.active=!1),e}))});default:return e}}}),y={key:"root",storage:b.a},C=Object(i.a)(y,w),x=Object(l.createStore)(C,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a))),k=Object(i.b)(x),S=function(e){var t=e.children;return r.a.createElement(s.a,{store:x},r.a.createElement(d.a,{loading:null,persistor:k},t))},P=n(32),T=n(28),L=n(42),F=n(29),I=n.n(F),B=n(41),N=n(50),_=n.n(N),M=function(e){var t={headers:{Authorization:"Bearer "+e}};return _.a.get("/api/user",t).then((function(e){return console.log("[AUTH API] Get user info"),e.data.data})).catch((function(){throw new Error("[Auth API] Could not get user info")}))},A=function(e){var t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("password",e.password),t.append("profile_image",e.avatar);return _.a.post("/api/register",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return{data:e.data,hasError:!1,errorMessage:""}})).catch((function(e){return{data:e.response.data,hasError:!0,errorMessage:e.response.data.errorMessage||"Couldn't create user."}}))},D=function(){return function(){var e=Object(B.a)(I.a.mark((function e(t,n){var a,r,o,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),!(r=a.auth).userLoggedIn){e.next=20;break}return o=null,e.prev=3,e.next=6,M(r.user.accessToken);case 6:o=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t(z()),e.abrupt("return");case 13:if(!o){e.next=18;break}c={name:o.name,email:o.email,isAdmin:o.admin,accessToken:o.accessToken,posts:o.posts,profilePicture:o.profilePicture,id:o._id},t(R(c)),e.next=20;break;case 18:return t(z()),e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()},R=function(e){return{type:g.LOGIN_USER,payload:e}},z=function(){return{type:g.LOGOUT}},G=function(e){var t=e.token,n=e.subject,a=e.body,r=e.tags,o=e.thumbnail,c=new FormData;c.append("subject",n),c.append("body",a),c.append("tags",r||[]),c.append("post_image",o);var l={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+t}};return _.a.post("/api/posts",c,l).then((function(e){return console.log("[BLOG API] Created post with success."),{hasError:!1,data:e.data.data,errorMessage:""}})).catch((function(e){return{hasError:!0,data:e.response.data,errorMessage:"Could not create post."}}))},V=function(e){var t=e.token,n=e.postId,a={headers:{Authorization:"Bearer "+t}};return _.a.delete("/api/posts/"+n,a).then((function(e){return console.log("[BLOG API] Post Removed with Success"),{hasError:!1,errorMessage:"",data:e.data}})).catch((function(e){var t,n;return{hasError:!0,errorMessage:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorMessage)||"Could not delete the post",data:e.response.data}}))},q=function(e,t,n){var a=new FormData;a.append("subject",n.subject),a.append("body",n.body),a.append("tags",n.tags||""),a.append("post_image",n.thumbnail);var r={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+e}};return _.a.put("/api/posts/".concat(t),a,r).then((function(e){return console.log("[BLOG API] Created post with success."),{hasError:!1,data:e.data.data,errorMessage:""}})).catch((function(e){var t;return{hasError:!0,data:e.response.data,errorMessage:(null===(t=e.response.errorMessage)||void 0===t?void 0:t[0])||e.response.errorMessage||"Could not update post."}}))},U=function(e){return{type:O.ADD_LOADER,payload:e}},Y=function(e){return{type:O.REMOVE_LOADER,payload:e}},H=function(){return function(){var e=Object(B.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t((a=!0,{type:v.LOADING,payload:a})),t(U("GET_ALL_POSTS")),e.next=4,_.a.get("/api/posts").then((function(e){return e.data.data})).catch((function(e){return null}));case 4:if(n=e.sent,t(Y("GET_ALL_POSTS")),!n){e.next=10;break}t({type:v.FETCH_POSTS,payload:n}),e.next=11;break;case 10:throw new Error("Couldnt reach the posts");case 11:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(e){var t=Math.abs(new Date-new Date(e));return Math.round(t/864e5)},J=n(6),K=n(19),Q=function(){var e=Object(s.c)((function(e){return e.auth})),t=Object(s.b)(),n=Object(a.useState)(!1),o=Object(K.a)(n,2),c=o[0],l=o[1],u=Object(a.useCallback)((function(){t(z())}),[t]);return r.a.createElement(J.x,{color:"white lighten-4",light:!0},r.a.createElement(J.i,null,r.a.createElement(J.y,{style:{color:"black"}},r.a.createElement(J.w,{style:{margin:"0"},to:"/"},"FullStack Blog")),r.a.createElement(J.o,{color:"#2196f3",style:{margin:0},id:"hamburger1",onClick:function(){return l(!c)}}),r.a.createElement(J.h,{isOpen:c,navbar:!0},r.a.createElement(J.z,{left:!0},e.userLoggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(J.v,{style:{listStyle:"none"}},r.a.createElement(J.w,{to:"/posts/create"},"Create Post")),r.a.createElement(J.v,{style:{listStyle:"none"}},r.a.createElement(J.w,{to:"/posts/manage"},"Manage Posts")),r.a.createElement(J.v,{style:{listStyle:"none"}},r.a.createElement(J.k,null,r.a.createElement(J.n,{nav:!0,caret:!0},r.a.createElement("span",{className:"mr-2"},e.user.name)),r.a.createElement(J.m,{className:"dropdown-default"},r.a.createElement(J.l,null,r.a.createElement(J.w,{to:"/manage"},"Your Profile")),r.a.createElement(J.l,null,r.a.createElement(J.w,{to:"",onClick:function(){u()}},"Logout")))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(J.v,{style:{listStyle:"none"}},r.a.createElement(J.w,{to:"/login"},"Login")),r.a.createElement(J.v,{style:{listStyle:"none"}},r.a.createElement(J.w,{to:"/register"},"Sign in")))))))},X=n(21),Z=n(15),$=n(253),ee=n.n($);function te(){var e=Object(X.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  h3 {\n    margin: 10px auto;\n    font-weight: bold;\n  }\n"]);return te=function(){return e},e}function ne(){var e=Object(X.a)(["\n  width: 100%;\n  height: 100%;\n  /* background: rgba(255, 255, 255, 0.5); */\n  z-index: 999;\n  position: absolute;\n  top: 0;\n  right: 0;\n"]);return ne=function(){return e},e}var ae=function(){return Object(s.c)((function(e){return e.controls})).loaders.some((function(e){return e.active}))?r.a.createElement(re,null,r.a.createElement(oe,null,r.a.createElement(ee.a,{type:"Bars",color:"#000",height:250,width:250}),r.a.createElement("h3",null,"Loading..."))):null},re=Z.b.div(ne()),oe=Z.b.div(te()),ce=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(J.i,null,r.a.createElement(ae,null),t))},le=function(e){var t=e.children;return r.a.createElement(J.e,{className:"my-5 px-5 pb-5"},r.a.createElement(J.f,null,t))},se=function(e){var t=e.title,n=e.message;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"h1-responsive font-weight-bold text-center my-5"},t),n&&r.a.createElement("p",null,n))};se.defaultProps={message:""};var ue=se,ie=function(){var e=Object(s.c)((function(e){return e.post})).posts,t=Object(T.g)();return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.C,null,r.a.createElement(J.g,{lg:"5"},r.a.createElement(J.F,{className:"rounded z-depth-2 mb-lg-0 mb-4",hover:!0,waves:!0},r.a.createElement("img",{className:"img-fluid",src:e.postImage?"".concat("/").concat(e.postImage.replace(/\\/g,"/")):"https://mdbootstrap.com/img/Photos/Others/img%20(27).jpg",alt:""}),r.a.createElement("a",{href:"#!"},r.a.createElement(J.u,{overlay:"white-slight"})))),r.a.createElement(J.g,{lg:"7"},e.tags.map((function(t,n){return r.a.createElement("a",{href:"#!",className:"green-text"},r.a.createElement("h6",{className:"font-weight-bold mb-3 d-inline"},t.name.replace(/"/g,""),n+1!==e.tags.length&&", "))})),r.a.createElement("h2",{className:"font-weight-bold mb-3 p-0"},r.a.createElement("strong",null,e.subject)),r.a.createElement("p",null,"by",r.a.createElement("a",{href:"#!"},r.a.createElement("strong",null," ",e.author.name)),", ","".concat(W(e.created_at))," days"),r.a.createElement(J.d,{color:"success",size:"md",className:"waves-light",onClick:function(){t.push("/posts/show/"+e._id)}},"Read more"))),r.a.createElement("hr",{className:"my-5"}))})))},de=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.post}));t.posts,t.isLoading;return Object(a.useEffect)((function(){e(H()),e(D());var t=setInterval((function(){e(H())}),3e4);return function(){clearInterval(t)}}),[e]),r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"List of Posts"}),r.a.createElement(ie,null)))},me=n(69);function pe(){var e=Object(X.a)(["\n  width: 60%;\n  margin: 1em auto;\n\n  @media screen and (max-width: 768px) {\n    width: 100%;\n  }\n  @media screen and (min-width: 768px) and (max-width: 1366px) {\n    width: 80%;\n  }\n"]);return pe=function(){return e},e}var be=function(e){var t=e.children;return r.a.createElement(he,null,t)},he=Z.b.div(pe()),fe=n(35),ge=fe.a().shape({email:fe.c().email("Email not valid.").required("Email is required!"),name:fe.c().required("Name is required!"),password:fe.c().min(6,"Password has to be longer than 6 characters!").required("Password is required!"),confirmPassword:fe.c().required().oneOf([fe.b("password")],"Passwords don't match")}),Ee={email:"",name:"",password:"",confirmPassword:"",avatar:null};function ve(){var e=Object(X.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  margin: 2rem auto;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(X.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return Oe=function(){return e},e}Z.b.div(Oe());var je=Z.b.div(ve());function we(){var e=Object(X.a)(["\n  display: block;\n  padding: ",";\n  color: white;\n  background: ",";\n  outline: none;\n  cursor: pointer;\n  border-radius: 2px;\n  font-size: 18px;\n  font-weight: 400;\n  border: 2px solid ",";\n  text-transform: uppercase;\n\n  &:hover {\n    background: white;\n    transition: 0.2s;\n    border-color: ",";\n    color: ",";\n  }\n  &:disabled {\n    opacity: 60%;\n    &:hover {\n      background: ",";\n      transition: none;\n      border: 2px solid ",";\n      color: white;\n      cursor: unset;\n    }\n  }\n"]);return we=function(){return e},e}function ye(){var e=Object(X.a)(["\n  display: block;\n  padding: ",";\n  color: white;\n  background: ",";\n  outline: none;\n  cursor: pointer;\n  border-radius: 2px;\n  font-size: 18px;\n  font-weight: 400;\n  border: 2px solid ",";\n  text-transform: uppercase;\n\n  &:hover {\n    background: white;\n    transition: 0.2s;\n    border-color: ",";\n    color: ",";\n  }\n  &:disabled {\n    opacity: 60%;\n    &:hover {\n      background: ",";\n      transition: none;\n      border: 2px solid ",";\n      color: white;\n      cursor: unset;\n    }\n  }\n"]);return ye=function(){return e},e}var Ce=function(e){var t,n=e.type,a=e.onClick,o=e.disabled,c=e.children,l=e.size,s=e.backgroundColor,u=Object(L.a)(e,["type","onClick","disabled","children","size","backgroundColor"]);switch(n){case"anchor":t=r.a.createElement(xe,Object.assign({onClick:a,disabled:o,size:l,backgroundColor:s},u),c);break;case"button":t=r.a.createElement(ke,Object.assign({onClick:a,disabled:o,size:l,backgroundColor:s},u),c);break;default:t=r.a.createElement(ke,Object.assign({onClick:a,disabled:o,size:l,backgroundColor:s},u),c)}return t},xe=Z.b.button(ye(),(function(e){return"big"===e.size?".5rem 2rem":".5rem 1.5rem"}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]})),ke=Z.b.button(we(),(function(e){return"big"===e.size?".5rem 2rem":".5rem 1.5rem"}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]}),(function(e){return e.theme[e.backgroundColor]})),Se=n(103),Pe=n(130),Te=n(92),Le=n.n(Te);function Fe(){var e=Object(X.a)(["\n  display: block;\n  opacity: ",";\n  width: 100%;\n  border: none;\n  outline: none;\n  padding: 0.4rem;\n  font-size: 1.1em;\n"]);return Fe=function(){return e},e}function Ie(){var e=Object(X.a)(["\n  display: block;\n  color: ",";\n  font-size: 1.1em;\n  width: 100%;\n"]);return Ie=function(){return e},e}function Be(){var e=Object(X.a)(["\n  width: 100%;\n  margin: 1em 0;\n"]);return Be=function(){return e},e}function Ne(){var e=Object(X.a)(["\n  color: ",";\n  margin-top: 5px;\n  animation: 1s "," ease-out;\n"]);return Ne=function(){return e},e}function _e(){var e=Object(X.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  color: ",";\n"]);return _e=function(){return e},e}function Me(){var e=Object(X.a)(["\n  width: 40px;\n  display: flex;\n  justify-content: center;\n  background: #c1bebe6b;\n  align-items: center;\n  color: ",";\n"]);return Me=function(){return e},e}function Ae(){var e=Object(X.a)(["\n  position: relative;\n  display: flex;\n  border-bottom: 1.48px solid\n    ",";\n"]);return Ae=function(){return e},e}function De(){var e=Object(X.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return De=function(){return e},e}var Re=Object(Z.c)(De()),ze=Z.b.div(Ae(),(function(e){return e.touched?e.error?e.theme.danger:e.theme.success:e.theme.dark})),Ge=Z.b.div(Me(),(function(e){return e.touched?e.error?e.theme.danger:e.theme.success:e.theme.dark})),Ve=Z.b.div(_e(),(function(e){return e.error?e.theme.danger:e.theme.success})),qe=Z.b.p(Ne(),(function(e){return e.theme.danger}),Re),Ue=Z.b.div(Be()),Ye=Z.b.label(Ie(),(function(e){return e.touched?e.error?e.theme.danger:e.theme.success:e.theme.dark})),He=Z.b.input(Fe(),(function(e){return e.opacity||"100"})),We=function(e){var t=e.resetField,n=e.touched,a=e.PrefixIcon,o=e.name,c=(e.minLength,e.maxLength,e.type),l=e.label,s=e.onChange,u=e.value,i=e.error,d=e.errorMessage,m=(e.regex,e.onBlur),p=e.displayErrorWhenImTrue,b=e.placeholder,h=Object(L.a)(e,["resetField","touched","PrefixIcon","name","minLength","maxLength","type","label","onChange","value","error","errorMessage","regex","onBlur","displayErrorWhenImTrue","placeholder"]),f=Le()();return r.a.createElement(Ue,null,r.a.createElement(Ye,{error:i,touched:n,htmlFor:f},l),r.a.createElement(ze,{error:i,touched:n},a&&r.a.createElement(Ge,{error:i,touched:n},r.a.createElement(a,null)),r.a.createElement(He,Object.assign({placeholder:b,value:u,name:o,id:f,type:c},h,{onBlur:m,onChange:s})),r.a.createElement(Ve,{error:i&&n},!i&&n&&r.a.createElement(Pe.a,null),i&&n&&r.a.createElement(Se.a,{onClick:t}))),i&&n&&!p&&r.a.createElement(qe,null,d),p&&r.a.createElement(qe,null,d))};function Je(){var e=Object(X.a)(['\n  width: 100%;\n  background-color: white;\n  \n  &:before {\n    content: "','";\n    color: black;\n    position: absolute;\n    top: 5px;\n  }\n']);return Je=function(){return e},e}function Ke(){var e=Object(X.a)(["\n  display: flex;\n  align-items: center;\n"]);return Ke=function(){return e},e}function Qe(){var e=Object(X.a)(["\n  max-width: 120px;\n  height: 120px;\n"]);return Qe=function(){return e},e}We.defaultProps={resetField:function(){},PrefixIcon:null,minLength:0,maxLength:void 0,type:"text",label:"",error:!1,errorMessage:"",regex:"",onBlur:function(){},displayErrorWhenImTrue:!1,placeholder:"",touched:!1};var Xe=function(e){var t=e.label,n=e.placeholder,o=e.value,c=e.displayErrorWhenImTrue,l=e.onChange,s=Object(L.a)(e,["label","placeholder","value","displayErrorWhenImTrue","onChange"]),u=Se.d,i=Object(a.useState)(!1),d=Object(K.a)(i,2),m=d[0],p=d[1],b=Object(a.useState)(!1),h=Object(K.a)(b,2),f=h[0],g=h[1],E=Object(a.useState)(!1),v=Object(K.a)(E,2),O=v[0],j=v[1],w=Object(a.useState)(""),y=Object(K.a)(w,2),C=y[0],x=y[1],k=Object(a.useState)(),S=Object(K.a)(k,2),P=S[0],T=S[1];Object(a.useEffect)((function(){T(Le()())}),[]);var F=function(e){if(e){e.preventDefault();var t=new FileReader,n=e.target.files[0];n?t.onloadend=function(){var e=t.result;j(!e),x(e),l(n,!0),g(!0),p(!1)}:p(!0),t.readAsDataURL(n)}else l(null,!1)};return r.a.createElement($e,null,r.a.createElement(Ze,{src:C}),r.a.createElement(Ue,null,r.a.createElement(Ye,{error:m,touched:f,htmlFor:P},t),r.a.createElement(ze,{error:m,touched:f},u&&r.a.createElement(Ge,{error:m,touched:f},r.a.createElement(u,null)),r.a.createElement(et,{text:o&&o.name},r.a.createElement(He,Object.assign({opacity:"0",placeholder:n,id:P,onChange:F,type:"file"},s))),r.a.createElement(Ve,{error:m&&f},!m&&f&&r.a.createElement(Pe.a,null),m&&f&&r.a.createElement(Se.a,{onClick:function(){return F()}}))),m&&f&&!c&&r.a.createElement(qe,null,"Something went wrong with the upload"),O&&f&&r.a.createElement(qe,null,"No Image Preview could be loaded"),c&&r.a.createElement(qe,null,"No Image Preview could be loaded")))},Ze=Z.b.img(Qe()),$e=Z.b.div(Ke()),et=Z.b.div(Je(),(function(e){return e.text||""}));Xe.defaultProps={label:"",placeholder:"",displayErrorWhenImTrue:!1,value:null};var tt=function(e){var t=e.errors,n=e.touched,a=e.values,o=e.handleChange,c=e.handleBlur,l=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{PrefixIcon:Se.b,errorMessage:t.name,error:Boolean(t.name),touched:n.name,label:"Your Name",resetField:function(){return l("name","")},value:a.name,name:"name",onChange:o,onBlur:c}),r.a.createElement(We,{PrefixIcon:Se.c,errorMessage:t.email,error:Boolean(t.email),touched:n.email,label:"Your Email",resetField:function(){return l("email","")},value:a.email,name:"email",onChange:o,onBlur:c}),r.a.createElement(We,{PrefixIcon:Pe.b,type:"password",errorMessage:t.password,resetField:function(){return l("password","")},error:Boolean(t.password),touched:n.password,label:"Your password",value:a.password,name:"password",onChange:o,onBlur:c}),r.a.createElement(We,{PrefixIcon:Pe.b,type:"password",errorMessage:t.confirmPassword,error:Boolean(t.confirmPassword),resetField:function(){return l("confirmPassword","")},touched:n.confirmPassword,label:"Confirm Password",value:a.confirmPassword,name:"confirmPassword",onChange:o,onBlur:c}),r.a.createElement(Xe,{onChange:function(e){return l("avatar",e)},value:a.avatar}))};tt.defaultProps={errors:{},touched:{}};var nt=tt,at=function(e){var t=e.errors,n=e.values,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur,s=e.touched,u=e.isSubmitting,i=e.isValid,d=e.handleSubmit,m=e.serverError,p=Object(a.useState)(m),b=Object(K.a)(p,2),h=b[0],f=b[1];return Object(a.useEffect)((function(){f(m)}),[m]),r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(J.b,{color:"danger",dismiss:!0,onClose:function(){f("")}},h),r.a.createElement("form",{onSubmit:d},r.a.createElement(nt,{errors:t,values:n,handleChange:o,setFieldValue:c,handleBlur:l,touched:s}),r.a.createElement(je,null,r.a.createElement(Ce,{backgroundColor:i?"success":"danger",disabled:!i||u},"Register"))))};at.defaultProps={serverError:""};var rt=at,ot=n(47),ct=function(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(K.a)(t,2),o=n[0],c=n[1],l=Object(ot.useToasts)().addToast,u=function(){var t=Object(B.a)(I.a.mark((function t(n,a){var r,o,s,u,i,d;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=a.setSubmitting)(!0),e(U("REGISTER_USER_LOADER")),t.next=5,A(n);case 5:if(o=t.sent,s=o.hasError,u=o.data,i=o.errorMessage,e(Y("REGISTER_USER_LOADER")),r(!1),!s){t.next=15;break}return l("Could not create user.",{appearance:"error"}),c(i),t.abrupt("return");case 15:d={name:u.user.name,email:u.user.email,accessToken:u.user.accessToken,posts:u.user.posts,profilePicture:u.user.profilePicture,id:u.user._id},c(""),l("Login Successfully",{appearance:"success"}),l("You're being redirected...",{appearance:"info"}),e(R(d));case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i=Object(me.a)({initialValues:Ee,validationSchema:ge,onSubmit:u});return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"Register"}),r.a.createElement(be,null,r.a.createElement(rt,Object.assign({},i,{serverError:o})))))},lt=function(e){var t=e.errors,n=e.touched,a=e.values,o=e.handleChange,c=e.handleBlur,l=e.setFieldValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{PrefixIcon:Se.c,errorMessage:t.email,error:Boolean(t.email),touched:n.email,label:"Your Email",value:a.email,name:"email",resetField:function(){return l("email","")},onChange:o,onBlur:c}),r.a.createElement(We,{PrefixIcon:Pe.b,type:"password",errorMessage:t.password,error:Boolean(t.password),resetField:function(){return l("password","")},touched:n.password,label:"Your password",value:a.password,name:"password",onChange:o,onBlur:c}))};lt.defaultProps={errors:{},touched:{}};var st=lt,ut=function(e){var t=e.errors,n=e.values,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur,s=e.touched,u=e.isSubmitting,i=e.isValid,d=e.handleSubmit,m=e.serverError,p=Object(a.useState)(m),b=Object(K.a)(p,2),h=b[0],f=b[1];return Object(a.useEffect)((function(){f(m)}),[m]),r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(J.b,{color:"danger",dismiss:!0,onClose:function(){f("")}},h),r.a.createElement("form",{onSubmit:d},r.a.createElement(st,{errors:t,values:n,handleChange:o,setFieldValue:c,handleBlur:l,touched:s}),r.a.createElement(je,null,r.a.createElement(Ce,{backgroundColor:i?"success":"danger",disabled:!i||u},"Login"))))},it=function(){var e=Object(a.useState)(""),t=Object(K.a)(e,2),n=t[0],o=t[1],c=Object(s.b)(),l=Object(ot.useToasts)().addToast,u=fe.a().shape({email:fe.c().email("Email not valid.").required("Email is required!"),password:fe.c().min(6,"Password has to be longer than 6 characters!").required("Password is required!")}),i=Object(me.a)({initialValues:{email:"",password:""},validationSchema:u,onSubmit:function(e,t){var n=t.setSubmitting;n(!0),c(U("LOGIN")),_.a.post("/api/login",{email:e.email,password:e.password}).then((function(e){if(n(!1),200===e.data.code){c(Y("LOGIN"));var t={name:e.data.user.name,email:e.data.user.email,isAdmin:e.data.user.admin,accessToken:e.data.user.accessToken,posts:e.data.user.posts,profilePicture:e.data.user.profilePicture,id:e.data.user._id};c(R(t)),l("Login Successfully",{appearance:"success"}),l("You're being redirected...",{appearance:"info"}),o("")}else c(Y("LOGIN")),o(e.data.errorMessage);console.log(e)})).catch((function(){o("Something bad happen. :("),c(Y("LOGIN")),n(!1)}))}});return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"Login"}),r.a.createElement(be,null,r.a.createElement(ut,Object.assign({},i,{serverError:n})))))},dt=fe.a().shape({subject:fe.c().required("Subject is required!").min(3).max(50),body:fe.c().required("Body of post is required!"),tags:fe.c().required("Tags are required!")}),mt={subject:"",body:"",tags:"",thumbnail:null},pt=n(511),bt=n(258),ht=n.n(bt),ft=n(259),gt=n.n(ft),Et=function(e){var t=e.touched,n=(e.name,e.label),a=e.onChange,o=e.value,c=e.error,l=e.errorMessage,s=e.onBlur,u=Object(L.a)(e,["touched","name","label","onChange","value","error","errorMessage","onBlur"]),i=Le()();return r.a.createElement(Ue,null,r.a.createElement(Ye,{error:c,touched:t,htmlFor:i},n),r.a.createElement(ht.a,Object.assign({},u,{editor:gt.a,data:o,onChange:function(e,t){var n=t.getData();a(n)},onBlur:function(e,t){var n=t.getData();s(n)}})),c&&t&&r.a.createElement(qe,null,l))};Et.defaultProps={error:!1,errorMessage:"",onBlur:function(){},touched:!1};var vt=n(129),Ot=n.n(vt),jt=function(e){var t=e.errors,n=e.touched,o=e.values,c=e.handleChange,l=e.handleBlur,s=e.setFieldValue,u=e.setTouched,i=Object(a.useState)(Ot()()),d=Object(K.a)(i,2),m=d[0],p=d[1],b=Object(a.useState)(null),f=Object(K.a)(b,2),g=f[0],E=f[1];return Object(a.useEffect)((function(){null!==g&&""!==g||p(Ot()()),E(o.body)}),[o.body]),r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{PrefixIcon:Se.c,errorMessage:t.subject,error:Boolean(t.subject),touched:n.subject,label:"Subject",value:o.subject,name:"subject",resetField:function(){return s("subject","")},onChange:c,onBlur:l}),r.a.createElement(We,{PrefixIcon:pt.a,errorMessage:t.tags,error:Boolean(t.tags),touched:n.tags,label:"Tags",value:o.tags,name:"tags",resetField:function(){return s("tags","")},placeholder:"sport, music, dance",onChange:c,onBlur:l}),r.a.createElement(Et,{PrefixIcon:Se.c,key:m,errorMessage:t.body,error:Boolean(t.body),touched:n.body,label:"Body",value:o.body,name:"body",onChange:function(e){s("body",e)},onBlur:function(e){s("body",e),u(Object(h.a)(Object(h.a)({},n),{},{body:!0}))}}),r.a.createElement(Xe,{label:"Thumbnail",onChange:function(e){return s("thumbnail",e)},value:o.avatar}))};jt.defaultProps={errors:{},touched:{}};var wt=jt,yt=function(e){var t=e.errors,n=e.values,o=e.handleChange,c=e.setFieldValue,l=e.handleBlur,s=e.touched,u=e.isSubmitting,i=e.isValid,d=e.handleSubmit,m=e.setTouched,p=e.serverError,b=e.editMode,h=Object(a.useState)(p),f=Object(K.a)(h,2),g=f[0],E=f[1];return Object(a.useEffect)((function(){E(p)}),[p]),r.a.createElement(r.a.Fragment,null,g&&r.a.createElement(J.b,{color:"danger",dismiss:!0,onClose:function(){E("")}},g),r.a.createElement("form",{onSubmit:d},r.a.createElement(wt,{errors:t,values:n,handleChange:o,setFieldValue:c,handleBlur:l,touched:s,setTouched:m}),r.a.createElement(je,null,r.a.createElement(Ce,{backgroundColor:i?"success":"danger",disabled:!i||u},b?"Edit Post":"Create Post"))))},Ct=function(){var e=Object(a.useState)(""),t=Object(K.a)(e,2),n=t[0],o=t[1],c=Object(s.b)(),l=Object(ot.useToasts)(),u=Object(s.c)((function(e){return e.auth})).user,i=Object(me.a)({initialValues:mt,validationSchema:dt,onSubmit:function(){var e=Object(B.a)(I.a.mark((function e(t,n){var a,r,s,i,d,m;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.setSubmitting)(!0),c(U("CREATE_POST")),e.next=5,G({token:u.accessToken,subject:t.subject,body:t.body,tags:t.tags,thumbnail:t.thumbnail});case 5:r=e.sent,s=r.hasError,i=r.errorMessage,d=r.data,c(Y("CREATE_POST")),a(!1),s?(l.addToast(i,{appearance:"error"}),o((null===d||void 0===d||null===(m=d.errors)||void 0===m?void 0:m[0])||""),console.log("CreatePostPage -> data",d)):(l.addToast("Post created successfully",{appearance:"success"}),c(D()),c(H()));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"Create a Post"}),r.a.createElement(be,null,r.a.createElement(yt,Object.assign({},i,{serverError:n})))))},xt=function(e){var t=e.user,n=Object(s.b)(),a=Object(ot.useToasts)().addToast,o=Object(T.g)(),c={columns:[{label:"Post Title",field:"postTitle",sort:"asc",width:150},{label:"Created At",field:"created_at",sort:"asc",width:150},{label:"Options",field:"options",sort:"asc",width:500}],rows:t.posts.map((function(e){return{postTitle:e.subject,created_at:new Date(e.created_at).toDateString(),options:[r.a.createElement(J.d,{onClick:Object(B.a)(I.a.mark((function r(){var o,c,l;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(U("DELETE_POST")),r.next=3,V({token:t.accessToken,postId:e._id});case 3:if(o=r.sent,c=o.errorMessage,l=o.hasError,n(Y("DELETE_POST")),!l){r.next=10;break}return a(c,{appearance:"error"}),r.abrupt("return");case 10:a("Post deleted successfully.",{appearance:"success"}),n(D()),n(H());case 13:case"end":return r.stop()}}),r)}))),color:"danger"},"Delete"),r.a.createElement(J.d,{onClick:Object(B.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.push("/posts/edit/"+e._id);case 1:case"end":return t.stop()}}),t)}))),color:"warning"},"Edit")]}}))};return r.a.createElement(J.C,null,r.a.createElement(J.g,null,r.a.createElement(J.j,{striped:!0,bordered:!0,hover:!0,data:c})))},kt=function(){var e=Object(s.c)((function(e){return e.auth})).user;return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"Manage Posts"}),r.a.createElement(xt,{user:e})))},St=function(e){var t=e.history.push,n=e.match.params.id,o=Object(a.useState)(""),c=Object(K.a)(o,2),l=c[0],u=c[1],i=Object(a.useState)(mt),d=Object(K.a)(i,2),m=d[0],p=d[1],b=Object(s.b)(),h=Object(ot.useToasts)(),f=Object(s.c)((function(e){return e.auth})).user;Object(a.useEffect)((function(){var e=f.posts.find((function(e){return e._id===n}));e?p({subject:e.subject,body:e.body,tags:e.tags.reduce((function(e,t){return e.concat(t.name)}),[]).join(", "),thumbnail:null}):(h.addToast("You cannot change this post.",{appearance:"error"}),h.addToast("Being redirected...",{appearance:"info"}),t("/"))}),[]);var g=Object(me.a)({initialValues:m,validationSchema:dt,enableReinitialize:!0,onSubmit:function(){var e=Object(B.a)(I.a.mark((function e(t,a){var r,o,c,l,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=a.setSubmitting)(!0),b(U("EDIT_POST")),e.next=5,q(f.accessToken,n,{subject:t.subject,body:t.body,tags:t.tags,thumbnail:t.thumbnail});case 5:o=e.sent,c=o.hasError,l=o.errorMessage,s=o.data,b(Y("EDIT_POST")),r(!1),c?(h.addToast(l,{appearance:"error"}),u(l),console.log("[Edit Post] data",s)):(h.addToast("Post updated successfully",{appearance:"success"}),b(D()),b(H()));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:"Edit Post"}),r.a.createElement(be,null,r.a.createElement(yt,Object.assign({},g,{editMode:!0,serverError:l})))))};function Pt(){var e=Object(X.a)(["\n  display: flex;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  flex-direction: column;\n"]);return Pt=function(){return e},e}var Tt=function(e){var t=e.match.params.id,n=Object(s.c)((function(e){return e.post.posts})).find((function(e){return e._id===t}));return r.a.createElement(ce,null,r.a.createElement(le,null,r.a.createElement(ue,{title:""}),r.a.createElement(J.i,null,r.a.createElement(J.C,null,r.a.createElement(J.g,{lg:"5"},r.a.createElement(J.F,{className:"rounded z-depth-2 mb-lg-0 mb-4",hover:!0,waves:!0},r.a.createElement("img",{className:"img-fluid",src:n.postImage?"".concat("/").concat(n.postImage.replace(/\\/g,"/")):"https://mdbootstrap.com/img/Photos/Others/img%20(27).jpg",alt:""}),r.a.createElement("a",{href:"#!"},r.a.createElement(J.u,{overlay:"white-slight"})))),r.a.createElement(J.g,{lg:"7"},r.a.createElement(Lt,null,r.a.createElement("p",null,n.tags.map((function(e,t){return r.a.createElement("a",{href:"#!",className:"green-text d-inline"},r.a.createElement("h6",{className:"font-weight-bold mb-3 d-inline"},e.name.replace(/"/g,""),t+1!==n.tags.length&&", "))}))),r.a.createElement("h2",{className:"font-weight-bold mb-3 p-0"},r.a.createElement("strong",null,n.subject)),r.a.createElement("p",null,"by",r.a.createElement("a",{href:"#!"},r.a.createElement("strong",null," ",n.author.name)),", ","".concat(W(n.created_at))," days")))),r.a.createElement("hr",{className:"my-5"}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.body}}))))},Lt=Z.b.div(Pt()),Ft=function(e){var t=e.Component,n=Object(L.a)(e,["Component"]),a=Object(s.c)((function(e){return e.auth}));return r.a.createElement(T.b,Object.assign({},n,{render:function(e){return a.userLoggedIn?r.a.createElement(T.a,{to:"/"}):r.a.createElement(t,e)}}))},It=function(e){var t=e.Component,n=Object(L.a)(e,["Component"]);return Object(s.c)((function(e){return e.auth})).userLoggedIn?r.a.createElement(T.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(T.b,Object.assign({},n,{render:function(e){return r.a.createElement(T.a,{to:"/"})}}))},Bt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.b,{path:"/",exact:!0,component:de}),r.a.createElement(Ft,{path:"/register",Component:ct}),r.a.createElement(It,{path:"/manage",Component:ct}),r.a.createElement(It,{path:"/posts/edit/:id",Component:St}),r.a.createElement(It,{path:"/posts/create",exact:!0,Component:Ct}),r.a.createElement(It,{path:"/posts/manage",Component:kt}),r.a.createElement(T.b,{path:"/posts/show/:id",exact:!0,component:Tt}),r.a.createElement(Ft,{path:"/login",Component:it}))},Nt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"sidebar-fixed position-fixed"},r.a.createElement("a",{href:"#!",className:"logo-wrapper waves-effect"},r.a.createElement("img",{alt:"MDB React Logo",className:"img-fluid"})),r.a.createElement(J.s,{className:"list-group-flush"},r.a.createElement(P.c,{exact:!0,to:"/",activeClassName:"activeClass"},r.a.createElement(J.t,null,r.a.createElement(J.p,{icon:"chart-pie",className:"mr-3"}),"Dashboard")),r.a.createElement(P.c,{to:"/profile",activeClassName:"activeClass"},r.a.createElement(J.t,null,r.a.createElement(J.p,{icon:"user",className:"mr-3"}),"Profile")),r.a.createElement(P.c,{to:"/tables",activeClassName:"activeClass"},r.a.createElement(J.t,null,r.a.createElement(J.p,{icon:"table",className:"mr-3"}),"Tables")),r.a.createElement(P.c,{to:"/maps",activeClassName:"activeClass"},r.a.createElement(J.t,null,r.a.createElement(J.p,{icon:"map",className:"mr-3"}),"Maps")),r.a.createElement(P.c,{to:"/404",activeClassName:"activeClass"},r.a.createElement(J.t,null,r.a.createElement(J.p,{icon:"exclamation",className:"mr-3"}),"404")))))},_t=function(){return r.a.createElement(r.a.Fragment,null)},Mt=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flexible-content"},r.a.createElement(Nt,null),r.a.createElement("main",{id:"content",className:"p-5"},t),r.a.createElement(_t,null)))},At=function(){return r.a.createElement(Mt,null,"teste")},Dt=function(e){var t=e.Component,n=Object(L.a)(e,["Component"]),a=Object(s.c)((function(e){return e.auth}));return r.a.createElement(T.b,Object.assign({},n,{render:function(e){return a.userLoggedIn&&a.user.isAdmin?r.a.createElement(t,e):r.a.createElement(T.a,{to:"/login"})}}))},Rt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{path:"/admin/dashboard",Component:At}))},zt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt,null),r.a.createElement(Rt,null))},Gt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,r.a.createElement(T.d,null,r.a.createElement(zt,null))))},Vt=(n(503),n(504),n(505),n(506),n(507),{success:"#379951",danger:"#91313F",dark:"#1D262B",purple:"#483B56",blue:"#5F54FF",orange:"#FF8552"}),qt=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{theme:Vt},t))},Ut=function(){return r.a.createElement(qt,null,r.a.createElement(S,null,r.a.createElement(ot.ToastProvider,{autoDismiss:!0,autoDismissTimeout:6e3},r.a.createElement(Gt,null))))};c.a.render(r.a.createElement(Ut,null),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.ba321e40.chunk.js.map